rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // --- 公開サイト設定 ---
    match /sites/{id} {
      allow read: if true;
      allow write: if false;
    }

    // --- ブログ（公開記事のみ）---
    match /blogs/{id} {
      allow read: if resource.data.status == 'published';
      allow write: if false;
    }

    // --- A8オファー（archived でない & status = active を公開）---
    match /offers/{offerId} {
      allow read: if
        (!('archived' in resource.data) || resource.data.archived == false)
        && (!('status' in resource.data) || resource.data.status == "active");
      allow write: if false;
    }

    // デフォルトは書込不可
    match /{document=**} {
      allow write: if false;
    }
  }
}
